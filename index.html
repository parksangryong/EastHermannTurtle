<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>íŒŒë¼ë„ ë§¤ë‹ˆì € | ë™í—¤ë¥´ë§Œ ìœ¡ì§€ê±°ë¶ ì‹ë‹¨ ê°€ì´ë“œ</title>
    <meta
      name="description"
      content="ë™í—¤ë¥´ë§Œ ìœ¡ì§€ê±°ë¶ì˜ ê±´ê°•í•œ ì„±ì¥ì„ ìœ„í•œ ì •ë°€ ì‹ë‹¨ ë¶„ì„ ê°€ì´ë“œ."
    />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Outfit:wght@400;600;700;800&family=Noto+Sans+KR:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        --primary: #2d5a27;
        --primary-light: #4c8a42;
        --accent: #f9d423;
        --bg-dark: #0f170d;
        --bg-light: #f4f7f2;
        --surface: rgba(255, 255, 255, 0.9);
        --text-main: #2d3436;
        --text-muted: #636e72;
        --grade-green: #2ecc71;
        --grade-orange: #f39c12;
        --grade-red: #e74c3c;
        --grade-black: #2d3436;
        --shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
        --radius: 24px;
        --font-heading: "Outfit", sans-serif;
        --font-body: "Inter", "Noto Sans KR", sans-serif;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        background-color: var(--bg-light);
        color: var(--text-main);
        font-family: var(--font-body);
        line-height: 1.6;
        overflow-x: hidden;
      }

      .container {
        max-width: 1100px;
        margin: 0 auto;
        padding: 2rem;
      }

      /* Hero */
      .hero-section {
        position: relative;
        height: 50vh;
        min-height: 450px;
        background: linear-gradient(135deg, #1a3a16 0%, #2d5a27 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        color: white;
        overflow: hidden;
      }

      /* Fallback background if image is not found or user wants simplicity */
      .hero-section::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-image: url("parado_manager_hero.png");
        background-size: cover;
        background-position: center;
        opacity: 0.4;
        filter: saturate(1.2);
      }

      .hero-content {
        position: relative;
        z-index: 2;
        max-width: 800px;
        padding: 0 1rem;
      }

      .badge {
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(10px);
        padding: 0.6rem 1.5rem;
        border-radius: 50px;
        font-size: 0.85rem;
        font-weight: 700;
        margin-bottom: 1.5rem;
        display: inline-block;
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      h1 {
        font-family: var(--font-heading);
        font-size: clamp(2.5rem, 8vw, 4rem);
        font-weight: 800;
        margin-bottom: 0.5rem;
        letter-spacing: -1.5px;
        line-height: 1.1;
      }

      .highlight {
        color: var(--accent);
      }

      .subtitle {
        font-size: 1.2rem;
        opacity: 0.9;
        font-weight: 300;
      }

      /* Grade Legend */
      .grade-legend {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        margin: -3rem auto 4rem;
        position: relative;
        z-index: 10;
      }

      .legend-card {
        background: white;
        padding: 1.5rem;
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        display: flex;
        align-items: center;
        gap: 1rem;
        transition: transform 0.3s ease;
      }

      .legend-card:hover {
        transform: translateY(-5px);
      }

      .legend-icon {
        font-size: 2rem;
      }

      .legend-text h4 {
        font-family: var(--font-heading);
        font-size: 1rem;
      }

      .legend-text p {
        font-size: 0.8rem;
        color: var(--text-muted);
        line-height: 1.3;
      }

      /* Search */
      .search-area {
        margin-bottom: 3rem;
        text-align: center;
      }

      #searchInput {
        width: 100%;
        max-width: 600px;
        padding: 1.2rem 2rem;
        border-radius: 50px;
        border: 2px solid transparent;
        background: white;
        box-shadow: var(--shadow);
        font-size: 1.1rem;
        transition: all 0.3s ease;
        outline: none;
        margin-bottom: 1.5rem;
      }

      #searchInput:focus {
        border-color: var(--primary-light);
      }

      /* Recommendation Buttons */
      .recommend-buttons {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 1rem;
        margin-bottom: 2rem;
      }

      .recommend-btn {
        padding: 0.8rem 1.5rem;
        border-radius: 50px;
        border: 2px solid var(--primary);
        background: white;
        color: var(--primary);
        font-weight: 600;
        font-size: 0.95rem;
        cursor: pointer;
        transition: all 0.3s ease;
        font-family: var(--font-body);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      }

      .recommend-btn:hover {
        background: var(--primary);
        color: white;
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(45, 90, 39, 0.3);
      }

      .recommend-btn.active {
        background: var(--primary);
        color: white;
      }

      /* Filter & Control Buttons */
      .control-bar {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        align-items: center;
        gap: 1rem;
        margin-bottom: 2rem;
      }

      .filter-buttons {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 0.8rem;
        margin-bottom: 1.5rem;
      }

      .filter-btn {
        padding: 0.7rem 1.3rem;
        border-radius: 50px;
        border: 2px solid transparent;
        background: white;
        color: var(--text-main);
        font-weight: 600;
        font-size: 0.9rem;
        cursor: pointer;
        transition: all 0.3s ease;
        font-family: var(--font-body);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      }

      .filter-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
      }

      .filter-btn.active {
        border-color: var(--primary);
        background: var(--primary);
        color: white;
      }

      .filter-btn[data-grade="green"] {
        border-color: var(--grade-green);
      }

      .filter-btn[data-grade="green"].active {
        background: var(--grade-green);
        color: white;
      }

      .filter-btn[data-grade="orange"] {
        border-color: var(--grade-orange);
      }

      .filter-btn[data-grade="orange"].active {
        background: var(--grade-orange);
        color: white;
      }

      .filter-btn[data-grade="red"] {
        border-color: var(--grade-red);
      }

      .filter-btn[data-grade="red"].active {
        background: var(--grade-red);
        color: white;
      }

      .filter-btn[data-grade="favorite"] {
        border-color: #ffd700;
      }

      .filter-btn[data-grade="favorite"].active {
        background: #ffd700;
        color: #2d3436;
      }

      .reset-btn {
        padding: 0.8rem 1.8rem;
        border-radius: 50px;
        border: 2px solid var(--text-muted);
        background: white;
        color: var(--text-muted);
        font-weight: 600;
        font-size: 0.95rem;
        cursor: pointer;
        transition: all 0.3s ease;
        font-family: var(--font-body);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      }

      .reset-btn:hover {
        background: var(--text-muted);
        color: white;
        transform: translateY(-2px);
      }

      .sort-select {
        padding: 0.7rem 1.3rem;
        border-radius: 50px;
        border: 2px solid var(--primary-light);
        background: white;
        color: var(--primary);
        font-weight: 600;
        font-size: 0.9rem;
        cursor: pointer;
        transition: all 0.3s ease;
        font-family: var(--font-body);
        outline: none;
      }

      .sort-select:hover {
        border-color: var(--primary);
        box-shadow: 0 2px 8px rgba(45, 90, 39, 0.15);
      }

      .result-count {
        text-align: center;
        color: var(--text-muted);
        font-size: 0.95rem;
        margin-bottom: 1rem;
        font-weight: 500;
      }

      .result-count strong {
        color: var(--primary);
        font-weight: 700;
      }

      /* í‰ê°€ ë°•ìŠ¤ */
      .evaluation-box {
        background: white;
        border-radius: var(--radius);
        padding: 1.5rem;
        margin-bottom: 2rem;
        box-shadow: var(--shadow);
        border-left: 4px solid var(--primary);
      }

      .evaluation-box.good {
        border-left-color: var(--grade-green);
        background: linear-gradient(
          135deg,
          rgba(46, 204, 113, 0.05) 0%,
          rgba(39, 174, 96, 0.05) 100%
        );
      }

      .evaluation-box.warning {
        border-left-color: var(--grade-orange);
        background: linear-gradient(
          135deg,
          rgba(243, 156, 18, 0.05) 0%,
          rgba(230, 126, 34, 0.05) 100%
        );
      }

      .evaluation-box.bad {
        border-left-color: var(--grade-red);
        background: linear-gradient(
          135deg,
          rgba(231, 76, 60, 0.05) 0%,
          rgba(192, 57, 43, 0.05) 100%
        );
      }

      .evaluation-header {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 1rem;
      }

      .evaluation-header h4 {
        font-family: var(--font-heading);
        color: var(--primary);
        font-size: 1.2rem;
        margin: 0;
      }

      .evaluation-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 1rem;
        margin-bottom: 1rem;
      }

      .evaluation-stat {
        text-align: center;
        padding: 0.8rem;
        background: rgba(255, 255, 255, 0.7);
        border-radius: 12px;
      }

      .evaluation-stat strong {
        display: block;
        color: var(--primary);
        font-size: 1.5rem;
        margin-bottom: 0.3rem;
      }

      .evaluation-stat span {
        font-size: 0.85rem;
        color: var(--text-muted);
      }

      .evaluation-issues {
        margin-top: 1rem;
      }

      .evaluation-issues h5 {
        font-family: var(--font-heading);
        color: var(--primary);
        font-size: 1rem;
        margin-bottom: 0.5rem;
      }

      .evaluation-issues ul {
        list-style: none;
        padding: 0;
        margin: 0;
      }

      .evaluation-issues li {
        padding: 0.5rem 0;
        font-size: 0.9rem;
        color: #444;
        padding-left: 1.5rem;
        position: relative;
      }

      .evaluation-issues li:before {
        content: "âš ï¸";
        position: absolute;
        left: 0;
      }

      .evaluation-recommendations {
        margin-top: 1rem;
        padding-top: 1rem;
        border-top: 1px solid rgba(0, 0, 0, 0.1);
      }

      .evaluation-recommendations h5 {
        font-family: var(--font-heading);
        color: var(--primary);
        font-size: 1rem;
        margin-bottom: 0.5rem;
      }

      .evaluation-recommendations ul {
        list-style: none;
        padding: 0;
        margin: 0;
      }

      .evaluation-recommendations li {
        padding: 0.5rem 0;
        font-size: 0.9rem;
        color: #444;
        padding-left: 1.5rem;
        position: relative;
      }

      .evaluation-recommendations li:before {
        content: "ğŸ’¡";
        position: absolute;
        left: 0;
      }

      /* Favorite Button */
      .favorite-btn {
        position: absolute;
        top: 1rem;
        right: 1rem;
        background: rgba(255, 255, 255, 0.9);
        border: none;
        border-radius: 50%;
        width: 36px;
        height: 36px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-size: 1.2rem;
        transition: all 0.3s ease;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        z-index: 5;
      }

      .favorite-btn:hover {
        transform: scale(1.1);
        background: white;
      }

      .favorite-btn.active {
        color: #ff6b6b;
      }

      /* Modal */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.7);
        backdrop-filter: blur(5px);
        z-index: 1000;
        align-items: center;
        justify-content: center;
        padding: 2rem;
        animation: fadeIn 0.3s ease;
      }

      .modal.show {
        display: flex;
      }

      .modal-content {
        background: white;
        border-radius: var(--radius);
        padding: 2.5rem;
        max-width: 600px;
        width: 100%;
        max-height: 90vh;
        overflow-y: auto;
        position: relative;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        animation: slideUp 0.3s ease;
      }

      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .modal-close {
        position: absolute;
        top: 1rem;
        right: 1rem;
        background: var(--text-muted);
        color: white;
        border: none;
        border-radius: 50%;
        width: 36px;
        height: 36px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-size: 1.2rem;
        transition: all 0.3s ease;
      }

      .modal-close:hover {
        background: var(--primary);
        transform: rotate(90deg);
      }

      .modal-title {
        font-family: var(--font-heading);
        font-size: 2rem;
        color: var(--primary);
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .modal-info {
        display: grid;
        gap: 1rem;
        margin-top: 1.5rem;
      }

      .modal-info-item {
        padding: 1rem;
        background: #f9fbf8;
        border-radius: 12px;
      }

      .modal-info-item strong {
        color: var(--primary);
        display: block;
        margin-bottom: 0.5rem;
      }

      .plant-card {
        cursor: pointer;
      }

      /* Combination Panel */
      .combination-panel {
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        background: white;
        border-radius: var(--radius);
        padding: 1.5rem;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        max-width: 400px;
        z-index: 100;
        display: none;
        animation: slideUp 0.3s ease;
      }

      .combination-panel.show {
        display: block;
      }

      .combination-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
      }

      .combination-header h3 {
        font-family: var(--font-heading);
        color: var(--primary);
        font-size: 1.3rem;
      }

      .close-combination {
        background: var(--text-muted);
        color: white;
        border: none;
        border-radius: 50%;
        width: 28px;
        height: 28px;
        cursor: pointer;
        font-size: 1.2rem;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
      }

      .close-combination:hover {
        background: var(--primary);
        transform: rotate(90deg);
      }

      .combination-plants {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-bottom: 1rem;
        max-height: 150px;
        overflow-y: auto;
      }

      .combination-plant {
        background: var(--primary-light);
        color: white;
        padding: 0.4rem 0.8rem;
        border-radius: 20px;
        font-size: 0.85rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .combination-plant .remove {
        cursor: pointer;
        font-weight: bold;
        opacity: 0.8;
      }

      .combination-plant .remove:hover {
        opacity: 1;
      }

      .combination-score {
        background: linear-gradient(135deg, #f9d423 0%, #f39c12 100%);
        padding: 1rem;
        border-radius: 16px;
        text-align: center;
        margin-bottom: 1rem;
      }

      .score-number {
        font-family: var(--font-heading);
        font-size: 3rem;
        font-weight: 800;
        color: white;
        line-height: 1;
        margin-bottom: 0.5rem;
      }

      .score-label {
        color: rgba(255, 255, 255, 0.9);
        font-size: 0.9rem;
        font-weight: 600;
      }

      .score-breakdown {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 0.5rem;
        margin-bottom: 1rem;
        font-size: 0.85rem;
      }

      .score-item {
        background: #f9fbf8;
        padding: 0.6rem;
        border-radius: 8px;
        text-align: center;
      }

      .score-item strong {
        color: var(--primary);
        display: block;
        margin-bottom: 0.2rem;
      }

      .advice-section {
        background: #fff9e6;
        border-left: 4px solid var(--accent);
        padding: 1rem;
        border-radius: 8px;
        margin-bottom: 1rem;
      }

      .advice-section h4 {
        color: var(--primary);
        font-family: var(--font-heading);
        margin-bottom: 0.5rem;
        font-size: 1rem;
      }

      .advice-section ul {
        list-style: none;
        padding: 0;
        margin: 0;
      }

      .advice-section li {
        padding: 0.3rem 0;
        font-size: 0.85rem;
        color: #444;
      }

      .advice-section li:before {
        content: "ğŸ’¡ ";
        margin-right: 0.3rem;
      }

      .add-to-combination-btn {
        position: absolute;
        bottom: 1rem;
        right: 1rem;
        background: var(--primary);
        color: white;
        border: none;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-size: 1.2rem;
        transition: all 0.3s ease;
        box-shadow: 0 4px 12px rgba(45, 90, 39, 0.3);
        z-index: 5;
      }

      .add-to-combination-btn:hover {
        transform: scale(1.1);
        background: var(--primary-light);
      }

      .add-to-combination-btn.added {
        background: var(--grade-green);
      }

      .combination-toggle {
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        background: var(--primary);
        color: white;
        border: none;
        border-radius: 50px;
        padding: 1rem 1.5rem;
        font-weight: 600;
        font-size: 1rem;
        cursor: pointer;
        box-shadow: 0 6px 20px rgba(45, 90, 39, 0.4);
        z-index: 99;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .combination-toggle:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(45, 90, 39, 0.5);
      }

      .combination-toggle .badge {
        background: rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        width: 24px;
        height: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.8rem;
      }

      @media (max-width: 600px) {
        .combination-panel {
          bottom: 1rem;
          right: 1rem;
          left: 1rem;
          max-width: none;
        }

        .combination-toggle {
          bottom: 1rem;
          right: 1rem;
        }
      }

      .recommend-result {
        background: linear-gradient(
          135deg,
          rgba(45, 90, 39, 0.05) 0%,
          rgba(76, 138, 66, 0.05) 100%
        );
        border: 2px dashed var(--primary-light);
        border-radius: var(--radius);
        padding: 2rem;
        margin-bottom: 2rem;
        text-align: center;
        display: none;
      }

      .recommend-result.show {
        display: block;
        animation: fadeIn 0.5s ease;
      }

      .recommend-result h3 {
        font-family: var(--font-heading);
        color: var(--primary);
        margin-bottom: 1rem;
        font-size: 1.3rem;
      }

      .recommend-result .result-plants {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 0.8rem;
        margin-top: 1rem;
      }

      .result-plant {
        background: white;
        padding: 0.6rem 1.2rem;
        border-radius: 50px;
        font-weight: 600;
        color: var(--primary);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        transition: transform 0.2s ease;
      }

      .result-plant:hover {
        transform: scale(1.05);
      }

      /* Plant Grid */
      .plant-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
        gap: 1.5rem;
        margin-bottom: 5rem;
      }

      .plant-card {
        background: white;
        border-radius: var(--radius);
        padding: 1.8rem;
        box-shadow: var(--shadow);
        display: flex;
        flex-direction: column;
        gap: 1rem;
        border: 1px solid rgba(0, 0, 0, 0.03);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .plant-card:hover {
        transform: translateY(-8px);
        border-color: var(--primary-light);
      }

      .card-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
      }

      .plant-title {
        font-family: var(--font-heading);
        font-size: 1.4rem;
        font-weight: 700;
        color: var(--primary);
      }

      .grade-tag {
        font-size: 1.8rem;
      }

      .meta-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
      }

      .tag {
        font-size: 0.8rem;
        padding: 0.3rem 0.8rem;
        border-radius: 50px;
        font-weight: 600;
      }

      .tag-ca {
        background: #e8f5e9;
        color: #2e7d32;
      }

      .tag-part {
        background: #f5f5f5;
        color: #616161;
      }

      .analysis-box {
        background: #f9fbf8;
        padding: 1rem;
        border-radius: 16px;
        font-size: 0.95rem;
        color: #444;
        flex-grow: 1;
      }

      /* Warnings */
      .warnings-section {
        background: var(--bg-dark);
        color: white;
        border-radius: 40px;
        padding: 4rem 3rem;
        margin-bottom: 5rem;
      }

      .warning-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 2rem;
        margin-top: 3rem;
      }

      .warning-item h3 {
        color: var(--accent);
        margin-bottom: 0.8rem;
        font-family: var(--font-heading);
      }

      .warning-item p {
        font-size: 0.9rem;
        opacity: 0.8;
      }

      /* Recommendation */
      .recommend-banner {
        background: linear-gradient(
            rgba(45, 90, 39, 0.9),
            rgba(45, 90, 39, 0.9)
          ),
          url("parado_manager_hero.png");
        background-size: cover;
        background-position: center;
        border-radius: 40px;
        padding: 4rem;
        text-align: center;
        color: white;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
      }

      .recommend-banner h2 {
        font-family: var(--font-heading);
        font-size: 2rem;
        margin-bottom: 2rem;
      }

      .mix-container {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
      }

      .mix-line {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
      }

      .mix-line span:first-child {
        font-weight: 700;
        color: var(--accent);
        font-size: 0.85rem;
        letter-spacing: 1px;
      }

      .chips {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 0.6rem;
      }

      .chips span {
        background: rgba(255, 255, 255, 0.15);
        padding: 0.5rem 1.2rem;
        border-radius: 50px;
        font-size: 0.9rem;
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      footer {
        text-align: center;
        padding: 4rem;
        color: var(--text-muted);
        font-size: 0.9rem;
      }

      /* Animations */
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(15px);
        }

        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .plant-card {
        opacity: 0;
        animation: fadeIn 0.5s ease forwards;
      }

      @media (max-width: 600px) {
        .container {
          padding: 1.5rem;
        }

        .hero-section {
          height: 40vh;
          min-height: 350px;
        }

        .recommend-banner {
          padding: 2rem;
        }
      }
    </style>
  </head>

  <body>
    <section class="hero-section">
      <div class="hero-content">
        <span class="badge">Tortoise Nutrition Specialist</span>
        <h1>PARADO <span class="highlight">MANAGER</span></h1>
        <p class="subtitle">ë™í—¤ë¥´ë§Œ ìœ¡ì§€ê±°ë¶ ì‹ì´ ë¶„ì„ ë° ì¶”ì²œ ê°€ì´ë“œ</p>
      </div>
    </section>

    <div class="container">
      <div class="grade-legend">
        <div class="legend-card">
          <span class="legend-icon">ğŸ’š</span>
          <div class="legend-text">
            <h4>ììœ  ê¸‰ì—¬</h4>
            <p>ë§¤ì¼ ì£¼ì‹ìœ¼ë¡œ ê¶Œì¥</p>
          </div>
        </div>
        <div class="legend-card">
          <span class="legend-icon">ğŸ§¡</span>
          <div class="legend-text">
            <h4>ì ë‹¹íˆ ê¸‰ì—¬</h4>
            <p>ì£¼ 1~2íšŒ í˜¼í•© ê¸‰ì—¬</p>
          </div>
        </div>
        <div class="legend-card">
          <span class="legend-icon">â¤ï¸</span>
          <div class="legend-text">
            <h4>ì£¼ì˜ ìš”ë§</h4>
            <p>ì†ŒëŸ‰ë§Œ ê°€ë” ê¸‰ì—¬</p>
          </div>
        </div>
        <div class="legend-card">
          <span class="legend-icon">âŒ</span>
          <div class="legend-text">
            <h4>ê¸‰ì—¬ ê¸ˆì§€</h4>
            <p>ë…ì„± ë˜ëŠ” ì˜ì–‘ ë¶ˆê· í˜•</p>
          </div>
        </div>
      </div>

      <div class="search-area">
        <input
          type="text"
          id="searchInput"
          placeholder="ì‹ë¬¼ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ë¯¼ë“¤ë ˆ, ë½•ì...)"
          autocomplete="off"
        />
        <div class="control-bar">
          <button class="reset-btn" id="resetBtn">ğŸ”„ ì´ˆê¸°í™”</button>
          <select class="sort-select" id="sortSelect">
            <option value="name">ì´ë¦„ìˆœ ì •ë ¬</option>
            <option value="grade">ë“±ê¸‰ìˆœ ì •ë ¬</option>
            <option value="ratio">Ca:P ë¹„ìœ¨ìˆœ</option>
          </select>
        </div>
        <div class="filter-buttons">
          <button class="filter-btn" data-grade="all">ì „ì²´</button>
          <button class="filter-btn" data-grade="green">ğŸ’š ììœ  ê¸‰ì—¬</button>
          <button class="filter-btn" data-grade="orange">ğŸ§¡ ì ë‹¹íˆ ê¸‰ì—¬</button>
          <button class="filter-btn" data-grade="red">â¤ï¸ ì£¼ì˜ ìš”ë§</button>
          <button class="filter-btn" data-grade="favorite">â­ ì¦ê²¨ì°¾ê¸°</button>
        </div>
        <div class="recommend-buttons">
          <button class="recommend-btn" data-type="safe">
            ğŸ’š ì•ˆì „í•œ ì£¼ì‹ ì¶”ì²œ
          </button>
          <button class="recommend-btn" data-type="calcium">
            ğŸ¦´ ì¹¼ìŠ˜ ë†’ì€ ì‹ë¬¼
          </button>
          <button class="recommend-btn" data-type="random">
            ğŸ² ëœë¤ ì¡°í•© ì¶”ì²œ
          </button>
          <button class="recommend-btn" data-type="daily">
            ğŸ“… ì˜¤ëŠ˜ì˜ ì‹ë‹¨
          </button>
        </div>
        <div id="recommendResult" class="recommend-result">
          <h3 id="resultTitle"></h3>
          <div class="result-plants" id="resultPlants"></div>
        </div>
        <div class="result-count" id="resultCount"></div>
        <div
          id="evaluationBox"
          class="evaluation-box"
          style="display: none"
        ></div>
      </div>

      <div id="plantGrid" class="plant-grid">
        <!-- JavaScript will populate this -->
      </div>

      <!-- Modal -->
      <div id="plantModal" class="modal">
        <div class="modal-content">
          <button class="modal-close" id="modalClose">Ã—</button>
          <div id="modalContent"></div>
        </div>
      </div>

      <section class="warnings-section">
        <h2
          style="
            font-family: var(--font-heading);
            text-align: center;
            font-size: 2rem;
          "
        >
          âš ï¸ í•µì‹¬ ì£¼ì˜ì‚¬í•­
        </h2>
        <div class="warning-grid">
          <div class="warning-item">
            <h3>ë‹¨ë°±ì§ˆ ê³¼ì‰</h3>
            <p>
              ë½•ì, ì•ŒíŒ”íŒŒ ë“± ê³ ë‹¨ë°± ì‹ë‹¨ì€ ì„±ì²´ ê±°ë¶ì´ì˜ ë“±ê°‘ í”¼ë¼ë¯¸ë”©ê³¼
              ì‹ ë¶€ì „ì„ ìœ ë°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•¼ìƒ ì¡ì´ˆ ìœ„ì£¼ë¡œ ê¸‰ì—¬í•˜ì„¸ìš”.
            </p>
          </div>
          <div class="warning-item">
            <h3>ì˜¥ì‚´ì‚° ê²°ì„</h3>
            <p>
              ì¼€ì¼, ì‹œê¸ˆì¹˜ ë“±ì— í¬í•¨ëœ ì˜¥ì‚´ì‚°ì€ ì¹¼ìŠ˜ í¡ìˆ˜ë¥¼ ë°©í•´í•˜ê³  ì²´ë‚´ ê²°ì„ì„
              ë§Œë“­ë‹ˆë‹¤. Ca:P ë¹„ìœ¨ë§Œí¼ì´ë‚˜ ì˜¥ì‚´ì„± í•¨ëŸ‰ì´ ì¤‘ìš”í•©ë‹ˆë‹¤.
            </p>
          </div>
          <div class="warning-item">
            <h3>ê³ ì´íŠ¸ë¡œì  </h3>
            <p>
              ì²­ê²½ì±„, ë¸Œë¡œì½œë¦¬ ë“± ì‹­ìí™”ê³¼ ì±„ì†ŒëŠ” ê°‘ìƒì„  ê¸°ëŠ¥ì„ ì €í•˜ì‹œí‚µë‹ˆë‹¤.
              ë§¤ì¼ ì£¼ì‹ì´ ì•„ë‹Œ ë³„ë¯¸ë¡œë§Œ ì†ŒëŸ‰ ê¸‰ì—¬í•˜ì‹­ì‹œì˜¤.
            </p>
          </div>
          <div class="warning-item">
            <h3>ìˆ˜ë¶„ ê³µê¸‰</h3>
            <p>
              ë¯¼ë“¤ë ˆ, ë°©ê°€ì§€ë˜¥ì€ ì´ë‡¨ ì‘ìš©ì´ ê°•í•©ë‹ˆë‹¤. ê³¼ë„í•œ ì„­ì·¨ ì‹œ íƒˆìˆ˜
              ìœ„í—˜ì´ ìˆìœ¼ë‹ˆ í•­ìƒ ì‹ ì„ í•œ ë¬¼ì„ ì œê³µí•˜ì„¸ìš”.
            </p>
          </div>
        </div>
      </section>

      <section class="recommend-banner">
        <h2>ğŸ’¡ íŒŒë¼ë„ ë§¤ë‹ˆì € ì¶”ì²œ ì¡°í•©</h2>
        <div class="mix-container">
          <div class="mix-line">
            <span>BEST MAIN</span>
            <div class="chips">
              <span>ì¹˜ì»¤ë¦¬</span> <span>ì§ˆê²½ì´</span> <span>ë¯¼ë“¤ë ˆ</span>
              <span>ì™•ê³ ë“¤ë¹¼ê¸°</span>
            </div>
          </div>
          <div class="mix-line">
            <span>CALCIUM BOOST</span>
            <div class="chips">
              <span>ë½•ì (ì–´ë¦° ê°œì²´)</span> <span>ì²œë…„ì´ˆ</span>
              <span>ê°€ì‹œì—‰ê²…í€´</span>
            </div>
          </div>
          <div class="mix-line">
            <span>SPECIAL TREAT</span>
            <div class="chips">
              <span>íˆë¹„ìŠ¤ì»¤ìŠ¤ ê½ƒ</span> <span>ì œë¹„ê½ƒ</span> <span>ê¸ˆì”í™”</span>
            </div>
          </div>
        </div>
      </section>
    </div>

    <footer>
      <p>&copy; 2024 íŒŒë¼ë„ ë§¤ë‹ˆì € - ë™í—¤ë¥´ë§Œ ìœ¡ì§€ê±°ë¶ ë°ì´í„° ì„¼í„°</p>
      <p style="opacity: 0.5; margin-top: 0.5rem">
        The Tortoise Table & êµ­ê°€í‘œì¤€ì‹í’ˆì„±ë¶„í‘œ ê¸°ë°˜
      </p>
    </footer>

    <script>
      const plantData = [
        {
          name: "ê°€ëŠ”ìì™•ê³ ë“¤ë¹¼ê¸°",
          grade: "green",
          icon: "ğŸ’š",
          calcium: 3.0,
          phosphorus: 1.0,
          analysis:
            "ì„¬ìœ ì§ˆì´ í’ë¶€í•˜ê³  ì¹¼ìŠ˜ ë¹„ìœ¨ì´ ì¢‹ì•„ ë§¤ìš° í›Œë¥­í•œ ì¡ì´ˆì…ë‹ˆë‹¤.",
          parts: "ğŸŒ¿",
        },
        {
          name: "ê°€ì‹œì—‰ê²…í€´",
          grade: "green",
          icon: "ğŸ’š",
          calcium: 3.5,
          phosphorus: 1.0,
          analysis: "ê°„ ê¸°ëŠ¥ íšŒë³µì— ë„ì›€ì„ ì£¼ë©° ì˜ì–‘ ê· í˜•ì´ ìš°ìˆ˜í•©ë‹ˆë‹¤.",
          parts: "ğŸŒ¿ğŸŒ¼",
        },
        {
          name: "ê°œë‚˜ë¦¬ ì/ê½ƒ",
          grade: "green",
          icon: "ğŸ’š",
          calcium: 2.0,
          phosphorus: 1.0,
          analysis: "ë´„ì²  ë³„ë¯¸ë¡œ ì¢‹ìŠµë‹ˆë‹¤. ë…ì„±ì´ ì—†ì–´ ì•ˆì „í•©ë‹ˆë‹¤.",
          parts: "ğŸŒ¿ğŸŒ¼",
        },
        {
          name: "ê°œë°œì„ ì¸ì¥",
          grade: "green",
          icon: "ğŸ’š",
          calcium: 5.0,
          phosphorus: 1.0,
          analysis: "ìˆ˜ë¶„ ë³´ì¶©ê³¼ ì¹¼ìŠ˜ ë³´ì¶©ì— íƒì›”í•©ë‹ˆë‹¤.",
          parts: "ğŸŒ¿",
        },
        {
          name: "ê°œë³´ë¦¬ëº‘ì´",
          grade: "green",
          icon: "ğŸ’š",
          calcium: 2.0,
          phosphorus: 1.0,
          analysis: "ê³ ë“¤ë¹¼ê¸°ë¥˜ì™€ ë¹„ìŠ·í•˜ê²Œ ì•ˆì „í•˜ê³  í›Œë¥­í•œ ì£¼ì‹ì…ë‹ˆë‹¤.",
          parts: "ğŸŒ¿",
        },
        {
          name: "ê³µì‹¬ì±„",
          grade: "orange",
          icon: "ğŸ§¡",
          calcium: 1.5,
          phosphorus: 1.0,
          analysis: "ì¹¼ìŠ˜ì€ ë§ìœ¼ë‚˜ ì˜¥ì‚´ì‚°ì´ ë‹¤ì†Œ ìˆì–´ ë§¤ì¼ ê¸‰ì—¬ëŠ” í”¼í•˜ì„¸ìš”.",
          parts: "ğŸŒ¿",
        },
        {
          name: "ê¸ˆê³„êµ­ / í°ê¸ˆê³„êµ­",
          grade: "green",
          icon: "ğŸ’š",
          calcium: 2.0,
          phosphorus: 1.0,
          analysis: "ê½ƒê³¼ ì ëª¨ë‘ ì•ˆì „í•˜ë©° ê¸°í˜¸ì„±ì´ ì¢‹ìŠµë‹ˆë‹¤.",
          parts: "ğŸŒ¿ğŸŒ¼",
        },
        {
          name: "ëƒ‰ì´",
          grade: "orange",
          icon: "ğŸ§¡",
          calcium: 2.5,
          phosphorus: 1.0,
          analysis: "ì˜ì–‘ì€ ì¢‹ìœ¼ë‚˜ ê³ ì´íŠ¸ë¡œì   ì„±ë¶„ì´ ìˆì–´ ì†ŒëŸ‰ì”© ê¸‰ì—¬í•˜ì‹­ì‹œì˜¤.",
          parts: "ğŸŒ¿",
        },
        {
          name: "ë¯¼ë“¤ë ˆ",
          grade: "green",
          icon: "ğŸ’š",
          calcium: 2.8,
          phosphorus: 1.0,
          analysis:
            "ìµœê³ ì˜ ì£¼ì‹. ì¹¼ìŠ˜ì´ ë§¤ìš° ë†’ìœ¼ë‚˜ ì´ë‡¨ ì‘ìš©ì´ ìˆì–´ ìˆ˜ë¶„ ê³µê¸‰ ë³‘í–‰ í•„ìˆ˜.",
          parts: "ğŸŒ¿ğŸŒ¼",
        },
        {
          name: "ë½•ì (êµ¬ì§€ë½• í¬í•¨)",
          grade: "green",
          icon: "ğŸ’š",
          calcium: 10.0,
          phosphorus: 1.0,
          analysis:
            "ì¹¼ìŠ˜ ëíŒì™•. ë‹¨ë°±ì§ˆì´ ë‹¤ì†Œ ë†’ìœ¼ë‹ˆ ìë¼ëŠ” ê°œì²´ì—ê²Œ íŠ¹íˆ ì¢‹ìŠµë‹ˆë‹¤.",
          parts: "ğŸŒ¿",
        },
        {
          name: "ëŒë‚˜ë¬¼",
          grade: "orange",
          icon: "ğŸ§¡",
          calcium: 1.8,
          phosphorus: 1.0,
          analysis: "ìˆ˜ë¶„ ë³´ì¶©ì— ì¢‹ìœ¼ë‚˜ ì¹¼ìŠ˜ ë¹„ìœ¨ì´ ì£¼ì‹ìœ¼ë¡œëŠ” ì‚´ì§ ë‚®ìŠµë‹ˆë‹¤.",
          parts: "ğŸŒ¿",
        },
        {
          name: "ë¡œë©”ì¸",
          grade: "orange",
          icon: "ğŸ§¡",
          calcium: 0.8,
          phosphorus: 1.0,
          analysis:
            "ì¸ ë¹„ì¤‘ì´ ë†’ìŠµë‹ˆë‹¤. ë°˜ë“œì‹œ ì¹¼ìŠ˜ì œë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ì£¼ì‹ì— ì„ì–´ì£¼ì„¸ìš”.",
          parts: "ğŸŒ¿",
        },
        {
          name: "ë£¨ê¼´ë¼",
          grade: "orange",
          icon: "ğŸ§¡",
          calcium: 2.0,
          phosphorus: 1.0,
          analysis: "ì¹¼ìŠ˜ì€ ë†’ì§€ë§Œ í–¥ì´ ê°•í•´ ê¸°í˜¸ì„±ì´ ê°ˆë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
          parts: "ğŸŒ¿",
        },
        {
          name: "ì§ˆê²½ì´ (ì™•/ì°½/í„¸)",
          grade: "green",
          icon: "ğŸ’š",
          calcium: 3.0,
          phosphorus: 1.0,
          analysis: "ì„¬ìœ ì§ˆê³¼ ì¹¼ìŠ˜ì˜ ì™„ë²½í•œ ì¡°í™”. ì£¼ì‹ìœ¼ë¡œ ê°•ë ¥ ì¶”ì²œí•©ë‹ˆë‹¤.",
          parts: "ğŸŒ¿",
        },
        {
          name: "ì¹˜ì»¤ë¦¬ / ì ì¹˜ì»¤ë¦¬",
          grade: "green",
          icon: "ğŸ’š",
          calcium: 2.0,
          phosphorus: 1.0,
          analysis: "ë§ˆíŠ¸ì—ì„œ êµ¬í•˜ê¸° ì‰¬ìš´ ê°€ì¥ ì•ˆì „í•œ ì±„ì†Œ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤.",
          parts: "ğŸŒ¿",
        },
        {
          name: "ì²­ê²½ì±„",
          grade: "red",
          icon: "â¤ï¸",
          calcium: 1.0,
          phosphorus: 1.0,
          analysis:
            "ê³ ì´íŠ¸ë¡œì  ì´ ë§ì•„ ê°‘ìƒì„  ë¹„ëŒ€ë¥¼ ìœ ë°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°€ë”ë§Œ ì£¼ì„¸ìš”.",
          parts: "ğŸŒ¿",
        },
        {
          name: "ì¼€ì¼",
          grade: "red",
          icon: "â¤ï¸",
          calcium: 2.0,
          phosphorus: 1.0,
          analysis:
            "ì¹¼ìŠ˜ì€ ë§ìœ¼ë‚˜ ì˜¥ì‚´ì‚°ê³¼ ê³ ì´íŠ¸ë¡œì  ì´ ëª¨ë‘ ë†’ì•„ ì£¼ì‹ìœ¼ë¡œëŠ” ë¶€ì í•©í•©ë‹ˆë‹¤.",
          parts: "ğŸŒ¿",
        },
        {
          name: "ì²œë…„ì´ˆ / ë°±ë…„ì´ˆ",
          grade: "green",
          icon: "ğŸ’š",
          calcium: 5.0,
          phosphorus: 1.0,
          analysis: "ê°€ì‹œ ì œê±° í›„ ê¸‰ì—¬ ì‹œ ìµœê³ ì˜ ì¹¼ìŠ˜ ë° ìˆ˜ë¶„ ê³µê¸‰ì›ì…ë‹ˆë‹¤.",
          parts: "ğŸŒ¿",
        },
        {
          name: "ë¬´ì²­",
          grade: "orange",
          icon: "ğŸ§¡",
          calcium: 3.0,
          phosphorus: 1.0,
          analysis: "ì¹¼ìŠ˜ì€ ë§¤ìš° ë†’ì§€ë§Œ ì˜¥ì‚´ì‚°ì´ ìˆì–´ ë‹¤ë¥¸ ì±„ì†Œì™€ ì„ì–´ì£¼ì„¸ìš”.",
          parts: "ğŸŒ¿",
        },
        {
          name: "ë¡œì¦ˆë§ˆë¦¬ / ë°”ì§ˆ / ë¯¼íŠ¸",
          grade: "red",
          icon: "â¤ï¸",
          calcium: 0.0,
          phosphorus: 1.0,
          analysis:
            "í–¥ì‹ ì±„ëŠ” ë…ì„±ì€ ì—†ìœ¼ë‚˜ í–¥ì´ ë„ˆë¬´ ê°•í•´ ê±°ë¶ì´ê°€ ê±°ë¶€í•˜ê±°ë‚˜ ë¶€ë‹´ì„ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
          parts: "ğŸŒ¿",
        },
        {
          name: "ì¥¬í‚¤ë‹ˆ (ì• í˜¸ë°•)",
          grade: "orange",
          icon: "ğŸ§¡",
          calcium: 0.5,
          phosphorus: 1.0,
          analysis: "ì¸ì´ ë†’ê³  ì¹¼ìŠ˜ì´ ë‚®ì•„ ì—´ë§¤ë³´ë‹¤ëŠ” ì ìœ„ì£¼ë¡œ ê¸‰ì—¬í•˜ì‹­ì‹œì˜¤.",
          parts: "ğŸŒ¿",
        },
      ];

      const grid = document.getElementById("plantGrid");
      const input = document.getElementById("searchInput");
      const recommendResult = document.getElementById("recommendResult");
      const resultTitle = document.getElementById("resultTitle");
      const resultPlants = document.getElementById("resultPlants");
      const recommendButtons = document.querySelectorAll(".recommend-btn");
      const resetBtn = document.getElementById("resetBtn");
      const sortSelect = document.getElementById("sortSelect");
      const filterButtons = document.querySelectorAll(".filter-btn");
      const resultCount = document.getElementById("resultCount");
      const evaluationBox = document.getElementById("evaluationBox");
      const modal = document.getElementById("plantModal");
      const modalContent = document.getElementById("modalContent");
      const modalClose = document.getElementById("modalClose");

      // ìƒíƒœ ê´€ë¦¬
      let currentFilter = "";
      let currentGradeFilter = "all";
      let currentSort = "name";
      let favorites = JSON.parse(localStorage.getItem("favorites") || "[]");

      // ratio ê³„ì‚° í—¬í¼ í•¨ìˆ˜
      function getRatio(plant) {
        if (plant.calcium === 0) return "-";
        const ratio = plant.calcium / plant.phosphorus;
        if (ratio >= 10) return `${ratio.toFixed(1)}:1 ì´ìƒ`;
        return `${ratio.toFixed(1)}:1`;
      }

      function getRatioValue(plant) {
        if (plant.calcium === 0) return 0;
        return plant.calcium / plant.phosphorus;
      }

      // ê²€ìƒ‰ëœ ì‹ë¬¼ë“¤ì˜ ì´í•© ë¹„ìœ¨ í‰ê°€
      function evaluateCombination(plants) {
        if (plants.length === 0) return null;

        let totalCalcium = 0;
        let totalPhosphorus = 0;
        let greenCount = 0;
        let orangeCount = 0;
        let redCount = 0;

        plants.forEach((p) => {
          totalCalcium += p.calcium;
          totalPhosphorus += p.phosphorus;
          if (p.grade === "green") greenCount++;
          else if (p.grade === "orange") orangeCount++;
          else if (p.grade === "red") redCount++;
        });

        const avgRatio =
          totalPhosphorus > 0 ? totalCalcium / totalPhosphorus : 0;
        const totalRatio =
          totalPhosphorus > 0 ? totalCalcium / totalPhosphorus : 0;

        // í‰ê°€
        let status = "good";
        let statusText = "ì¢‹ìŒ";
        let statusIcon = "âœ…";
        let issues = [];
        let recommendations = [];

        // Ca:P ë¹„ìœ¨ í‰ê°€ (ì œê³µëœ ê¸°ì¤€ì— ë”°ë¼)
        if (avgRatio <= 0.5) {
          // 0.5:1 ì´í•˜: ğŸš¨ ë§¤ìš° ìœ„í—˜
          status = "bad";
          statusText = "ë§¤ìš° ìœ„í—˜";
          statusIcon = "ğŸš¨";
          issues.push(
            `Ca:P ë¹„ìœ¨ì´ ë§¤ìš° ìœ„í—˜í•©ë‹ˆë‹¤ (${avgRatio.toFixed(
              2
            )}:1). ì‹¬ê°í•œ ê³¨ì§ˆí™˜, íšŒë³µ ì–´ë ¤ì›€.`
          );
          recommendations.push(
            "ì¦‰ì‹œ ì¹¼ìŠ˜ì´ ë†’ì€ ì‹ë¬¼(ë½•ì, ì²œë…„ì´ˆ, ë¯¼ë“¤ë ˆ, ì§ˆê²½ì´ ë“±)ì„ ì¶”ê°€í•˜ê³  ì¹¼ìŠ˜ì œë¥¼ ë³´ì¶©í•˜ì„¸ìš”."
          );
        } else if (avgRatio <= 1.0) {
          // 1:1 ì´í•˜: ğŸš« ìœ„í—˜
          status = "bad";
          statusText = "ìœ„í—˜";
          statusIcon = "ğŸš«";
          issues.push(
            `Ca:P ë¹„ìœ¨ì´ ìœ„í—˜í•©ë‹ˆë‹¤ (${avgRatio.toFixed(
              2
            )}:1). ë“±ë”±ì§€ ì—°í™”, ë³€í˜•, ì„±ì¥ ì¥ì•  ìœ„í—˜.`
          );
          recommendations.push(
            "ì¹¼ìŠ˜ì´ ë†’ì€ ì‹ë¬¼(ë½•ì, ì²œë…„ì´ˆ, ë¯¼ë“¤ë ˆ, ì§ˆê²½ì´ ë“±)ì„ ì¦‰ì‹œ ì¶”ê°€í•˜ì„¸ìš”."
          );
        } else if (avgRatio < 1.5) {
          // 1:1 ì´ˆê³¼ ~ 1.5 ë¯¸ë§Œ: âŒ ë¶€ì í•©
          status = "bad";
          statusText = "ë¶€ì í•©";
          statusIcon = "âŒ";
          issues.push(
            `Ca:P ë¹„ìœ¨ì´ ë¶€ì í•©í•©ë‹ˆë‹¤ (${avgRatio.toFixed(
              2
            )}:1). ì¥ê¸° ê¸‰ì—¬ ì‹œ MBD(ëŒ€ì‚¬ì„± ê³¨ì§ˆí™˜) ìœ„í—˜.`
          );
          recommendations.push(
            "ì¹¼ìŠ˜ì´ ë†’ì€ ì‹ë¬¼ì„ ì¶”ê°€í•˜ì—¬ ë¹„ìœ¨ì„ 2:1 ì´ìƒìœ¼ë¡œ ì˜¬ë¦¬ì„¸ìš”."
          );
        } else if (avgRatio < 2.0) {
          // 1.5:1 ~ 2.0 ë¯¸ë§Œ: âš ï¸ ì£¼ì˜
          status = "warning";
          statusText = "ì£¼ì˜";
          statusIcon = "âš ï¸";
          issues.push(
            `Ca:P ë¹„ìœ¨ì— ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤ (${avgRatio.toFixed(
              2
            )}:1). ì¸ ë¹„ìœ¨ ì¦ê°€ë¡œ ì¹¼ìŠ˜ í¡ìˆ˜ ì €í•´ê°€ ì‹œì‘ë©ë‹ˆë‹¤.`
          );
          recommendations.push(
            "ì¹¼ìŠ˜ì´ ë†’ì€ ì‹ë¬¼ì„ ì¶”ê°€í•˜ì—¬ ë¹„ìœ¨ì„ 2:1 ì´ìƒìœ¼ë¡œ ì˜¬ë¦¬ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤."
          );
        } else if (avgRatio < 2.5) {
          // 2:1 ~ 2.5 ë¯¸ë§Œ: âœ… ì ì •
          status = "good";
          statusText = "ì ì •";
          statusIcon = "âœ…";
          // ì ì • ë²”ìœ„ì´ë¯€ë¡œ ë¬¸ì œ ì—†ìŒ
        } else if (avgRatio < 3.0) {
          // 2.5:1 ~ 3.0 ë¯¸ë§Œ: â­ ìµœì 
          status = "good";
          statusText = "ìµœì ";
          statusIcon = "â­";
          // ìµœì  ë²”ìœ„ì´ë¯€ë¡œ ë¬¸ì œ ì—†ìŒ
        } else {
          // 3:1 ì´ìƒ: âš ï¸ ì£¼ì˜
          status = "warning";
          statusText = "ì£¼ì˜";
          statusIcon = "âš ï¸";
          issues.push(
            `Ca:P ë¹„ìœ¨ì´ ë†’ìŠµë‹ˆë‹¤ (${avgRatio.toFixed(
              2
            )}:1). ë‹¨ê¸°ì ìœ¼ë¡œëŠ” ë¬¸ì œê°€ ì ìœ¼ë‚˜ ì¥ê¸°ì ìœ¼ë¡œ ë¯¸ë„¤ë„ ë¶ˆê· í˜•ê³¼ ì‹ ì¥ ë¶€ë‹´ ê°€ëŠ¥.`
          );
          recommendations.push(
            "ë‹¤ì–‘í•œ ì‹ë¬¼ì„ ì„ì–´ ê· í˜•ì„ ë§ì¶”ê³ , ì¥ê¸°ì ìœ¼ë¡œëŠ” 2.5:1 ì •ë„ë¡œ ì¡°ì •í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤."
          );
        }

        // ë“±ê¸‰ ë¶„í¬ í‰ê°€
        const redRatio = redCount / plants.length;
        if (redRatio > 0.2) {
          status = "bad";
          statusText = "ì£¼ì˜ í•„ìš”";
          statusIcon = "âš ï¸";
          issues.push(
            `ì£¼ì˜ ìš”ë§ ì‹ë¬¼ì´ ${redCount}ê°œ(${Math.round(
              redRatio * 100
            )}%) í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.`
          );
          recommendations.push("ì£¼ì˜ ìš”ë§ ì‹ë¬¼ì€ ì†ŒëŸ‰ë§Œ ê¸‰ì—¬í•˜ì„¸ìš”.");
        } else if (redRatio > 0) {
          issues.push(
            `ì£¼ì˜ ìš”ë§ ì‹ë¬¼ì´ ${redCount}ê°œ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì†ŒëŸ‰ë§Œ ê¸‰ì—¬í•˜ì„¸ìš”.`
          );
        }

        const orangeRatio = orangeCount / plants.length;
        if (orangeRatio > 0.5 && greenCount < orangeCount) {
          if (status !== "bad") {
            status = "warning";
            statusText = "ê°œì„  ê¶Œì¥";
            statusIcon = "âš ï¸";
          }
          issues.push(`ì ë‹¹íˆ ê¸‰ì—¬ ì‹ë¬¼ì´ ë§ìŠµë‹ˆë‹¤ (${orangeCount}ê°œ).`);
          recommendations.push("ììœ  ê¸‰ì—¬ ì‹ë¬¼ì„ ë” ì¶”ê°€í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.");
        }

        // ë‹¤ì–‘ì„± í‰ê°€
        if (plants.length < 3) {
          if (status !== "bad" && status !== "warning") {
            status = "warning";
            statusText = "ê°œì„  ê¶Œì¥";
            statusIcon = "âš ï¸";
          }
          recommendations.push(
            "ì‹ë¬¼ ì¢…ë¥˜ë¥¼ ë” ë‹¤ì–‘í•˜ê²Œ ì¶”ê°€í•˜ë©´ ì˜ì–‘ ê· í˜•ì´ ì¢‹ì•„ì§‘ë‹ˆë‹¤."
          );
        }

        return {
          totalCalcium,
          totalPhosphorus,
          avgRatio: avgRatio.toFixed(2),
          totalRatio: totalRatio.toFixed(2),
          greenCount,
          orangeCount,
          redCount,
          totalCount: plants.length,
          status,
          statusText,
          statusIcon,
          issues,
          recommendations,
        };
      }

      // ì¦ê²¨ì°¾ê¸° ì €ì¥/ë¡œë“œ
      function saveFavorites() {
        localStorage.setItem("favorites", JSON.stringify(favorites));
      }

      function toggleFavorite(plantName) {
        const index = favorites.indexOf(plantName);
        if (index > -1) {
          favorites.splice(index, 1);
        } else {
          favorites.push(plantName);
        }
        saveFavorites();
        render();
      }

      function isFavorite(plantName) {
        return favorites.includes(plantName);
      }

      // ì •ë ¬ í•¨ìˆ˜
      function sortPlants(plants) {
        const sorted = [...plants];
        switch (currentSort) {
          case "name":
            sorted.sort((a, b) => a.name.localeCompare(b.name, "ko"));
            break;
          case "grade":
            const gradeOrder = { green: 1, orange: 2, red: 3 };
            sorted.sort((a, b) => gradeOrder[a.grade] - gradeOrder[b.grade]);
            break;
          case "ratio":
            sorted.sort((a, b) => {
              return getRatioValue(b) - getRatioValue(a);
            });
            break;
        }
        return sorted;
      }

      function render(filter = currentFilter) {
        currentFilter = filter;
        grid.innerHTML = "";
        let filtered;

        if (filter.includes("|")) {
          // ì¶”ì²œ ê¸°ëŠ¥ì—ì„œ ì—¬ëŸ¬ ì‹ë¬¼ ì´ë¦„ìœ¼ë¡œ í•„í„°ë§
          const names = filter.split("|");
          filtered = plantData.filter((p) =>
            names.some((name) => p.name.includes(name.trim()))
          );
        } else {
          filtered = plantData.filter(
            (p) => p.name.includes(filter) || p.analysis.includes(filter)
          );
        }

        // ë“±ê¸‰ í•„í„° ì ìš©
        if (currentGradeFilter === "favorite") {
          filtered = filtered.filter((p) => isFavorite(p.name));
        } else if (currentGradeFilter !== "all") {
          filtered = filtered.filter((p) => p.grade === currentGradeFilter);
        }

        // ì •ë ¬ ì ìš©
        filtered = sortPlants(filtered);

        // ê²°ê³¼ ê°œìˆ˜ í‘œì‹œ
        resultCount.innerHTML = `<strong>${filtered.length}</strong>ê°œì˜ ì‹ë¬¼ì´ ê²€ìƒ‰ë˜ì—ˆìŠµë‹ˆë‹¤.`;

        // í‰ê°€ ê²°ê³¼ ê³„ì‚° ë° í‘œì‹œ (ì´ˆê¸°í™” ìƒíƒœê°€ ì•„ë‹ ë•Œë§Œ í‘œì‹œ)
        const isInitialState =
          (!currentFilter || currentFilter.trim() === "") &&
          currentGradeFilter === "all";

        if (filtered.length > 0 && !isInitialState) {
          const evaluation = evaluateCombination(filtered);
          if (evaluation) {
            evaluationBox.className = `evaluation-box ${evaluation.status}`;
            evaluationBox.style.display = "block";

            let issuesHTML = "";
            if (evaluation.issues.length > 0) {
              issuesHTML = `
                <div class="evaluation-issues">
                  <h5>âš ï¸ ì£¼ì˜ì‚¬í•­</h5>
                  <ul>
                    ${evaluation.issues
                      .map((issue) => `<li>${issue}</li>`)
                      .join("")}
                  </ul>
                </div>
              `;
            }

            let recommendationsHTML = "";
            if (evaluation.recommendations.length > 0) {
              recommendationsHTML = `
                <div class="evaluation-recommendations">
                  <h5>ğŸ’¡ ê°œì„  ê¶Œì¥ì‚¬í•­</h5>
                  <ul>
                    ${evaluation.recommendations
                      .map((rec) => `<li>${rec}</li>`)
                      .join("")}
                  </ul>
                </div>
              `;
            }

            evaluationBox.innerHTML = `
              <div class="evaluation-header">
                <span style="font-size: 1.5rem;">${evaluation.statusIcon}</span>
                <h4>ì˜ì–‘ ê· í˜• í‰ê°€: ${evaluation.statusText}</h4>
              </div>
              <div class="evaluation-stats">
                <div class="evaluation-stat">
                  <strong>${evaluation.avgRatio}:1</strong>
                  <span>í‰ê·  Ca:P ë¹„ìœ¨</span>
                </div>
                <div class="evaluation-stat">
                  <strong>${evaluation.greenCount}</strong>
                  <span>ììœ  ê¸‰ì—¬</span>
                </div>
                <div class="evaluation-stat">
                  <strong>${evaluation.orangeCount}</strong>
                  <span>ì ë‹¹íˆ ê¸‰ì—¬</span>
                </div>
                <div class="evaluation-stat">
                  <strong>${evaluation.redCount}</strong>
                  <span>ì£¼ì˜ ìš”ë§</span>
                </div>
              </div>
              ${issuesHTML}
              ${recommendationsHTML}
            `;
          }
        } else {
          evaluationBox.style.display = "none";
        }

        // ì´ˆê¸°í™” ìƒíƒœì¼ ë•ŒëŠ” í•­ìƒ ìˆ¨ê¹€
        if (isInitialState) {
          evaluationBox.style.display = "none";
        }

        filtered.forEach((p, idx) => {
          const card = document.createElement("div");
          card.className = "plant-card";
          card.style.animationDelay = `${idx * 0.05}s`;
          const isFav = isFavorite(p.name);
          card.innerHTML = `
                    <button class="favorite-btn ${
                      isFav ? "active" : ""
                    }" data-name="${p.name}">
                        ${isFav ? "â¤ï¸" : "ğŸ¤"}
                    </button>
                    <div class="card-header">
                        <h3 class="plant-title">${p.name}</h3>
                        <span class="grade-tag">${p.icon}</span>
                    </div>
                    <div class="meta-tags">
                        <span class="tag tag-ca">Ca:P ${getRatio(p)}</span>
                        <span class="tag tag-part">${p.parts} ê¸‰ì—¬</span>
                    </div>
                    <div class="analysis-box">${p.analysis}</div>
                `;

          // ì¹´ë“œ í´ë¦­ ì‹œ ëª¨ë‹¬ ì—´ê¸°
          card.addEventListener("click", () => showModal(p));

          // ì¦ê²¨ì°¾ê¸° ë²„íŠ¼
          const favBtn = card.querySelector(".favorite-btn");
          favBtn.addEventListener("click", (e) => {
            e.stopPropagation();
            toggleFavorite(p.name);
          });

          grid.appendChild(card);
        });
      }

      // ëª¨ë‹¬ í‘œì‹œ
      function showModal(plant) {
        const gradeText = {
          green: "ììœ  ê¸‰ì—¬ - ë§¤ì¼ ì£¼ì‹ìœ¼ë¡œ ê¶Œì¥",
          orange: "ì ë‹¹íˆ ê¸‰ì—¬ - ì£¼ 1~2íšŒ í˜¼í•© ê¸‰ì—¬",
          red: "ì£¼ì˜ ìš”ë§ - ì†ŒëŸ‰ë§Œ ê°€ë” ê¸‰ì—¬",
        };

        modalContent.innerHTML = `
          <h2 class="modal-title">
            ${plant.icon} ${plant.name}
          </h2>
          <div class="modal-info">
            <div class="modal-info-item">
              <strong>ë“±ê¸‰</strong>
              ${gradeText[plant.grade]}
            </div>
            <div class="modal-info-item">
              <strong>Ca:P ë¹„ìœ¨</strong>
              ${getRatio(plant)} (ì¹¼ìŠ˜: ${plant.calcium}, ì¸: ${
          plant.phosphorus
        })
            </div>
            <div class="modal-info-item">
              <strong>ê¸‰ì—¬ ë¶€ìœ„</strong>
              ${plant.parts}
            </div>
            <div class="modal-info-item">
              <strong>ìƒì„¸ ë¶„ì„</strong>
              ${plant.analysis}
            </div>
          </div>
        `;
        modal.classList.add("show");
      }

      // ëª¨ë‹¬ ë‹«ê¸°
      modalClose.addEventListener("click", () => {
        modal.classList.remove("show");
      });

      modal.addEventListener("click", (e) => {
        if (e.target === modal) {
          modal.classList.remove("show");
        }
      });

      function shuffleArray(array) {
        const shuffled = [...array];
        for (let i = shuffled.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
        }
        return shuffled;
      }

      function showRecommendation(type) {
        let recommended = [];
        let title = "";

        switch (type) {
          case "safe":
            recommended = plantData
              .filter((p) => p.grade === "green")
              .slice(0, 6);
            title = "ğŸ’š ì•ˆì „í•˜ê²Œ ë§¤ì¼ ê¸‰ì—¬ ê°€ëŠ¥í•œ ì£¼ì‹ ì¶”ì²œ";
            break;
          case "calcium":
            recommended = plantData
              .filter((p) => p.grade === "green" && getRatioValue(p) >= 3)
              .slice(0, 5);
            title = "ğŸ¦´ ì¹¼ìŠ˜ í•¨ëŸ‰ì´ ë†’ì€ ì‹ë¬¼ ì¶”ì²œ";
            break;
          case "random":
            // ë“±ê¸‰ ìƒê´€ì—†ì´ ëª¨ë“  ì‹ë¬¼ ì¤‘ ëœë¤ ì„ íƒ
            recommended = shuffleArray(plantData).slice(0, 4);
            title = "ğŸ² ì§„ì§œ ëœë¤ ì¡°í•© ì¶”ì²œ";
            break;
          case "daily":
            // Ca:P ë¹„ìœ¨ì„ ê³ ë ¤í•œ ê· í˜•ì¡íŒ ì‹ë‹¨ ì¶”ì²œ
            const dailySafePlants = plantData.filter(
              (p) => p.grade === "green"
            );

            // ìµœì  ë¹„ìœ¨(2:1 ~ 2.5:1)ì„ ë§Œë“œëŠ” ì¡°í•© ì°¾ê¸°
            function findBalancedCombination(
              plants,
              targetRatio = 2.2,
              count = 5
            ) {
              const shuffled = shuffleArray(plants);
              let bestCombination = [];
              let bestRatioDiff = Infinity;

              // ì—¬ëŸ¬ ì¡°í•© ì‹œë„ (ìµœëŒ€ 100ë²ˆ)
              for (let attempt = 0; attempt < 100; attempt++) {
                const combination = [];
                let totalCalcium = 0;
                let totalPhosphorus = 0;

                // 4-6ê°œ ì‹ë¬¼ ì„ íƒ
                const targetCount = 4 + Math.floor(Math.random() * 3);
                const selected = shuffleArray(plants).slice(0, targetCount);

                selected.forEach((plant) => {
                  combination.push(plant);
                  totalCalcium += plant.calcium;
                  totalPhosphorus += plant.phosphorus;
                });

                if (totalPhosphorus > 0) {
                  const ratio = totalCalcium / totalPhosphorus;
                  const ratioDiff = Math.abs(ratio - targetRatio);

                  // ëª©í‘œ ë¹„ìœ¨ì— ê°€ê¹Œìš°ë©´ì„œ 2:1 ~ 2.5:1 ë²”ìœ„ ë‚´
                  if (
                    ratio >= 2.0 &&
                    ratio <= 2.5 &&
                    ratioDiff < bestRatioDiff
                  ) {
                    bestCombination = combination;
                    bestRatioDiff = ratioDiff;
                  }
                }
              }

              // ìµœì  ì¡°í•©ì„ ì°¾ì§€ ëª»í•œ ê²½ìš°, ê°€ì¥ ê°€ê¹Œìš´ ì¡°í•© ë°˜í™˜
              if (bestCombination.length === 0) {
                // ê¸°ë³¸ ì¡°í•©: ë©”ì¸ ì‹ë¬¼ + ë³´ì¡° ì‹ë¬¼
                const main = plants.filter((p) =>
                  ["ë¯¼ë“¤ë ˆ", "ì§ˆê²½ì´", "ì¹˜ì»¤ë¦¬", "ê°€ëŠ”ìì™•ê³ ë“¤ë¹¼ê¸°"].some((n) =>
                    p.name.includes(n)
                  )
                );
                const others = plants.filter(
                  (p) => !main.some((m) => m.name === p.name)
                );
                bestCombination = [
                  ...main.slice(0, 2),
                  ...shuffleArray(others).slice(0, 3),
                ];
              }

              return bestCombination;
            }

            recommended = findBalancedCombination(dailySafePlants);

            // ìµœì¢… ë¹„ìœ¨ ê³„ì‚° ë° í‘œì‹œ
            const finalCalcium = recommended.reduce(
              (sum, p) => sum + p.calcium,
              0
            );
            const finalPhosphorus = recommended.reduce(
              (sum, p) => sum + p.phosphorus,
              0
            );
            const finalRatio =
              finalPhosphorus > 0
                ? (finalCalcium / finalPhosphorus).toFixed(2)
                : "0";

            title = `ğŸ“… ì˜¤ëŠ˜ì˜ ê· í˜•ì¡íŒ ì‹ë‹¨ ì¶”ì²œ (Ca:P ${finalRatio}:1)`;
            break;
        }

        if (recommended.length > 0) {
          resultTitle.textContent = title;
          resultPlants.innerHTML = "";
          recommended.forEach((plant) => {
            const span = document.createElement("span");
            span.className = "result-plant";
            span.textContent = `${plant.icon} ${plant.name}`;
            span.style.cursor = "pointer";
            span.addEventListener("click", () => {
              input.value = plant.name;
              currentGradeFilter = "all";
              filterButtons.forEach((b) => b.classList.remove("active"));
              filterButtons[0].classList.add("active");
              render(plant.name);
              recommendResult.classList.remove("show");
            });
            resultPlants.appendChild(span);
          });
          recommendResult.classList.add("show");

          // ì¶”ì²œëœ ì‹ë¬¼ë“¤ë¡œ í•„í„°ë§
          const names = recommended.map((p) => p.name);
          input.value = names.join(" ");
          currentGradeFilter = "all";
          filterButtons.forEach((b) => b.classList.remove("active"));
          filterButtons[0].classList.add("active");
          render(names.join("|"));
        }
      }

      // ì´ˆê¸°í™” ë²„íŠ¼
      resetBtn.addEventListener("click", () => {
        input.value = "";
        currentFilter = "";
        currentGradeFilter = "all";
        currentSort = "name";
        sortSelect.value = "name";
        recommendResult.classList.remove("show");
        recommendButtons.forEach((b) => b.classList.remove("active"));
        filterButtons.forEach((b) => b.classList.remove("active"));
        filterButtons[0].classList.add("active"); // "ì „ì²´" ë²„íŠ¼ í™œì„±í™”
        render();
      });

      // í•„í„° ë²„íŠ¼
      filterButtons.forEach((btn) => {
        btn.addEventListener("click", () => {
          filterButtons.forEach((b) => b.classList.remove("active"));
          btn.classList.add("active");
          currentGradeFilter = btn.getAttribute("data-grade");
          render();
        });
      });

      // ì •ë ¬ ì„ íƒ
      sortSelect.addEventListener("change", (e) => {
        currentSort = e.target.value;
        render();
      });

      // ì¶”ì²œ ë²„íŠ¼
      recommendButtons.forEach((btn) => {
        btn.addEventListener("click", () => {
          recommendButtons.forEach((b) => b.classList.remove("active"));
          btn.classList.add("active");
          const type = btn.getAttribute("data-type");
          showRecommendation(type);
        });
      });

      // ê²€ìƒ‰ ì…ë ¥
      input.addEventListener("input", (e) => {
        if (e.target.value.trim() === "") {
          recommendResult.classList.remove("show");
          recommendButtons.forEach((b) => b.classList.remove("active"));
        }
        render(e.target.value);
      });

      // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ (ESCë¡œ ëª¨ë‹¬ ë‹«ê¸°, /ë¡œ ê²€ìƒ‰ í¬ì»¤ìŠ¤)
      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") {
          modal.classList.remove("show");
        }
        if (e.key === "/" && e.target.tagName !== "INPUT") {
          e.preventDefault();
          input.focus();
        }
      });

      // ì´ˆê¸° ë Œë”ë§
      filterButtons[0].classList.add("active"); // "ì „ì²´" ë²„íŠ¼ í™œì„±í™”
      render(); // Init
    </script>
  </body>
</html>
